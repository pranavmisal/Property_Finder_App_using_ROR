<div class="property-main-photo" style="background-image:url('<%= property_photo_url @property %>')">
    <div class="photo-overlay">        
    </div>
</div>

<div class="container">
    <div class="row">
        <div class="col-md-8">
            <div class="row">
                <div class="col-lg-5">
                    <p class="h4 mb-0"><%= @property.for_sale? ? "For Sale" : "For Rent" %></p>
                    <p class="mb-2"><%= @property.address %></p>
                    <p class="h2 mb-3">
                        <% if @property.for_sale? %>
                            <%= @property.price > 0 ? number_to_currency(@property.price, precision: 0) : "Offers Accepted" %>
                        <% else %>
                            <%= @property.price > 0 ? number_to_currency(@property.price, precision: 0) : "Open for enquiries" %> / month
                        <% end %>
                    </p>
                </div>
                <div class="col-lg-7 text-center">
                    <div class="row bg-light p-3 mt-sm-3">
                        <div class="col-4">
                            <p class="mb-0"><strong> </strong></p>
                            <i class="fa fa-bed" aria-hidden="true"></i><br>
                            <small><%= @property.rooms %> Rooms</small>
                        </div>
                        <div class="col-4">
                            <p class="mb-0"><strong></strong></p>
                            <i class="fa fa-bath" aria-hidden="true"></i><br>
                            <small><%= @property.bathrooms %> Bathrooms</small>
                        </div>
                        <div class="col-4">
                            <p class="mb-0"><strong></strong></p>
                            <i class="fa fa-car"></i><br>
                            <small><%= @property.parking_spaces %>Parking</small>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row border-top border-bottom mt-5 mb-4 pt-4 pb-4">
                <div class="col-6">
                    <% if @property.for_sale? %>
                        <strong><%= link_to "Est. Monthly Repayment of #{number_to_currency((@property.price - (@property.price * 0.1)) / 360, precision: 0)}*", "#", class: "text-success" %></strong>
                    <% else %>
                        <strong>Available from, <%= @property.available_date.day.ordinalize %> <%= @property.available_date.strftime("%a") %> </strong>
                    <% end %>
                </div>
                <div class="col-6 text-right">
                    <strong><%= link_to "Can I afford this property?", "#", class: "text-success" %></strong>
                </div>
            </div>
            <div class="row">
                <div class="col">
                    <p class="h4"><%= @property.name %></p>
                    <p class="h5">Property Description</p>
                    <div id="prop-details" class="">
                        <%= simple_format @property.details %>
                    </div>
                    <button class="btn btn-outline-info mt-3" id="toggleDetails">Show More</button>
                    <p class="mt-5">* This rate is based on 30 year mortage, after paying an initial 10% down payment</p>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <%= render "properties/agent_details" %>
            <%#= render "properties/agent_details" %>
            <iframe class="ml-lg-4 mt-3" width="320" height="240" src="https://www.google.com/maps/embed/v1/place?key=AIzaSyBwOWZ_C1sw6lYJhxYk_LJJCI2uM9GW8IA&q=<%= @property.address.to_param %>" frameborder="0" allowfullscreen></iframe>
        </div> 
    </div>
</div>

<section class="mb-5 mt-5">
    <div class="container">
        <div class="row">
            <div class="col-12">
                <p class="h3 mb-3">Other properties by this agent</p>
            </div>
            <%= render "properties/list", properties: @agent_properties %>
        </div>
    </div>
</section>

<!-- modal -->
<button type="button" class="btn btn-primary" data-target="#contact-modal" data-whatever="@mdo">Open modal for @mdo</button>

<div class="modal fade" id="contact-modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">New Message for <%= @agent.first_name %></h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form>
                    <div class="form-group">
                        <label for="recipient-name" class="col-form-label">Recipient:</label>
                        <input type="text" class="form-control" id="recipient-name">
                    </div>
                    <div class="form-group">
                        <label for="message-text" class="col-form-label">Message:</label>
                        <textarea class="form-control" id="message-text"></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">
                    Close
                </button>
                <button type="button" class="btn btn-primary">
                    Send message
                </button>
            </div>
        </div>
    </div>
</div>


